/**
 * @file kyobo_search_auto.js
 * @doc PC ìë™ì™„ì„± ê¸°ëŠ¥ ì‚¬ìš©ì‹œ ê¸°ëŠ¥ì •ë¦¬
 */
/*
var curCursorPos = -1;
var totalKeywordCount = 0 ; 
var cursorEvent = false ;
*/ 
	var sOrderClick = "LAG";
	var isRcntShow = true; // ìµœê·¼ê²€ìƒ‰ì–´ ë…¸ì¶œ ì—¬ë¶€ì„¤ì •.
	
	if(window.location.hostname.indexOf("local.kyobobook") > -1 || window.location.hostname.indexOf("localhost.kyobobook") > -1 || window.location.hostname.indexOf("searchdev.kyobobook") > -1) {
		//ë¡œì»¬
		var autoSearchDomain = "";
		var autoOrderDomain = "//ordertest.kyobobook.co.kr/cart/addCart";
		var autoWwwDomain = "http://dev.kyobobook.co.kr";  //20190917 ì¶”ê°€
		var autoGiftDomain = "http://gift.kyobobook.co.kr";
		var autoMusicDomain = "http://music.kyobobook.co.kr";
		var autoSamDomain = "http://sam.kyobobook.co.kr";
		var autoDigitalDomain = "http://digital.kyobobook.co.kr";
		var autoPodDomain = "http://pod.kyobobook.co.kr";
	} else if(window.location.hostname.indexOf("dev.kyobobook") > -1 || window.location.hostname.indexOf("test.kyobobook") > -1) {
		//í…ŒìŠ¤íŠ¸
		var autoSearchDomain = "https://searchdev.kyobobook.co.kr";
		var autoOrderDomain = "//ordertest.kyobobook.co.kr/cart/addCart";
		var autoWwwDomain = "http://dev.kyobobook.co.kr";   //20190917 ì¶”ê°€
		var autoGiftDomain = "http://gift.kyobobook.co.kr";
		var autoMusicDomain = "http://music.kyobobook.co.kr";
		var autoSamDomain = "http://sam.kyobobook.co.kr";    
		var autoDigitalDomain = "http://digital.kyobobook.co.kr";
		var autoPodDomain = "http://pod.kyobobook.co.kr";
	} else {
		//ìš´ì˜
		var autoSearchDomain = "https://search.kyobobook.co.kr";
		var autoOrderDomain = "//order.kyobobook.co.kr/cart/addCart";
		var autoWwwDomain = "http://www.kyobobook.co.kr";   //20190917 ì¶”ê°€
		var autoGiftDomain = "http://gift.kyobobook.co.kr";
		var autoMusicDomain = "http://music.kyobobook.co.kr";
		var autoSamDomain = "http://sam.kyobobook.co.kr";  
		var autoDigitalDomain = "http://digital.kyobobook.co.kr";
		var autoPodDomain = "http://pod.kyobobook.co.kr";
	}
	
	

	/**
	 * ìƒì„¸URIì´ë™
	 * @params function ê¸°ëŠ¥
	 * @params kind
	 * @params ejkGb
	 * @params samCode
	 * @params barcode
	 * @params code
	 * @params orderClick
	 * @returns
	 */
	function autoView(kind, ejkGB, samCode, barcode, code, orderClick){

		var domain = "";
		var mallGb = "";
		if("JAP" == ejkGB || "JNT" == ejkGB) mallGb = "JAP";
		else if("ENG" == ejkGB || "BNT" == ejkGB) mallGb = "ENG";
		else mallGb = ejkGB;
		
		encode = encodeURIComponent(code);
	
		if("GFT" == ejkGB) {
			if("detail" == kind) domain = autoGiftDomain + "/ht/product/detail?barcode=" + barcode + "&orderClick=" + orderClick + "&Kc=";
		}
		if("DVD" == ejkGB||"MUC" == ejkGB) {
			if("detail" == kind) domain = autoMusicDomain + "/ht/record/detail/"+barcode + "?orderClick=" + orderClick + "&Kc=";
		}
		if(ejkGB == "SAM" ) {	//sam ìë™ì™„ì„±
			if("detail" == kind) domain = autoSamDomain + "/sbweb/samclub/samclubDetail.ink?barcode=" + barcode;
		}
		if(ejkGB == "EBK") {	//ebook
			if("detail" == kind) domain = autoDigitalDomain + "/digital/ebook/ebookDetail.ink?selectedLargeCategory=001&barcode=" + barcode + "&orderClick=" + orderClick + "&Kc=";
		}
		if(ejkGB == "DUM") {
			if("detail" == kind) domain = autoDigitalDomain + "/digital/article/articleDetail.ink?selectedLargeCategory=006&barcode=" + barcode + "&orderClick=" + orderClick + "&Kc=";
		}
		if("ENG" == ejkGB || "BNT" == ejkGB || "JNT" == ejkGB || "JAP" == ejkGB) {
			if("detail" == kind) domain = autoWwwDomain + "/product/detailViewEng.laf?ejkGb=" + ejkGB + "&mallGb=" + mallGb + "&barcode=" +  barcode + "&orderClick=" + orderClick + "&Kc=";
		}
		if("KOR" == ejkGB) {
			if("detail" == kind) domain =  autoWwwDomain + "/product/detailViewKor.laf?ejkGb=" + ejkGB + "&mallGb=" + mallGb + "&barcode=" +  barcode + "&orderClick=" + orderClick + "&Kc=";
		}
		if(barcode.substring(0,2) == "14") { //POD
			if("detail" == kind) domain =  autoPodDomain + "/soldOutPODBookList/soldOutPODBookDetailView.ink?ejkGb=" + ejkGB + "&barcode=" +  barcode + "&orderClick=" + orderClick + "&Kc=";
		}
		/*
		if(barcode.substring(0, 2) == "29") {
			linkUrl = domain = autoWwwDomain + "/product/detailViewPackage.laf?mallGb=PKG";
		}
		*/
		document.location.href=domain;
	}	
	
	function GetAutoCompleteCookieCart(name) {
		var arg = name + "=";
		var alen = arg.length;
		var clen = document.cookie.length;
		var i = 0;
		while (i < clen) {
		var j = i + alen;
			if (document.cookie.substring(i, j) == arg) {
				var endstr = document.cookie.indexOf (";", j);
				if (endstr == -1)
					endstr = document.cookie.length;
				return unescape(document.cookie.substring(j, endstr));
				
			}			i = document.cookie.indexOf(" ", i) + 1;
			if (i == 0) break; 
		}
		return null;
	}
	
	//var lYn =  GetAutoCompleteCookieCart("NECI");
	function goAutoAddCartChk(orderUrl, barcode, ejk_gb,notAge,loginYn){
		
		var domain = autoWwwDomain;
		var searchDomain = autoSearchDomain;
		var obj = new Object();
	
		//obj.cartGb = "N";			
		//obj.siteCd = "";			
		//obj.srcPageYn = "Y";		
		//obj.orderClick = "LEJ"; íŒŒë¼ë¯¸í„° ëª…ì¹­ ë³€ê²½ 19.10.08 í™ì§€ì• 
		obj.clickOrder = "LEJ";
		obj.qty = "1";										
		obj.barcode = barcode;			
		obj.ejkGb = ejk_gb;
		obj.auto = "auto";
		obj.notAge = notAge;
		obj.cartType = "";
	
	//	obj.indexCnt = "1";
		
		retUrl = window.location.href;
		if(retUrl.indexOf("/web/search") > 0 && retUrl.indexOf("searchPcondition") < 0) retUrl += (retUrl.indexOf("?") > 0 ? "&" : "?") + "searchPconditon=1";
		retUrl = escape(retUrl);
		retUrl = encodeURIComponent(retUrl);
		/*
		if(retUrl.indexOf("/web/search") > 0 && retUrl.indexOf("searchPcondition") < 0) {
			retUrl += (retUrl.indexOf("?") > 0 ? "&" : "?") + "searchPconditon=1";
			retUrl = escape(retUrl);
		} else {
			retUrl = escape(decodeURI(retUrl));
		}
		*/
		
	//	if(lYn != null && lYn != "") loginYn = lYn;
		if(ejk_gb =="EBK" && loginYn =="N"){//ebookì— ë¡œê·¸ì¸í•˜ì§€ ì•Šì•˜ì„ê²½ìš°
			  if(confirm("ë¡œê·¸ì¸ì´ í•„ìš”í•œ ìƒí’ˆì…ë‹ˆë‹¤. ë¡œê·¸ì¸ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
				  	//document.location.href = domain +"/login/login.laf?Kc=GNHHNOlogin&orderClick=c03&retURL=" + searchDomain + "/web/search?vPstrKeyWord="+escape($("#searchKeyword").val());
					document.location.href = domain +"/login/login.laf?Kc=GNHHNOlogin&orderClick=c03&retURL="+ retUrl;
		            return;
			  } else {
				  return;
			  }
		}
		
		var form = document.createElement("form");
		form.setAttribute("method", "Post"); // Get ë˜ëŠ” Post ì…ë ¥
		form.setAttribute("action", orderUrl+"?spbk_dvsn_code=002");
		form.setAttribute("target", "iframeautoblank");
		form.setAttribute("name", "autoFrm");
	//	form.setAttribute("charset", "UTF-8");
		for( var key in obj ) {
			  var hiddenField = document.createElement("input");
				hiddenField.setAttribute("type", "hidden");
				hiddenField.setAttribute("name", key);
				hiddenField.setAttribute("value", obj[key]);
				form.appendChild(hiddenField);
		}
		document.body.appendChild(form);
	//	setWebRecommShop(barcode, ejk_gb, "P"); //í•¨ê»˜ë³¸ìƒí’ˆ ë¡œê·¸ 
		form.submit();
	}

(function($){
	//ìë™ê²€ìƒ‰ì–´ ì¿ í‚¤ 
	function GetAutoCompleteCookie (name) {
		var arg = name + "=";
		var alen = arg.length;
		var clen = document.cookie.length;
		var i = 0;
		while (i < clen) {
		var j = i + alen;
			if (document.cookie.substring(i, j) == arg)
				return GetAutoCompleteCookieVal (j);
			i = document.cookie.indexOf(" ", i) + 1;
			if (i == 0) break; 
		}
		return null;
	}
	function GetAutoCompleteCookieVal (offset) {
		var endstr = document.cookie.indexOf (";", offset);
		if (endstr == -1)
			endstr = document.cookie.length;
		return unescape(document.cookie.substring(offset, endstr));
	}
	function SetAutoCompleteCookie (name, value) {
		var argv = SetAutoCompleteCookie.arguments;
		var argc = SetAutoCompleteCookie.arguments.length;
		var expires = (argc > 2) ? argv[2] : null;
		var path = "/";
		var domain = ".kyobobook.co.kr";
		var secure = (argc > 5) ? argv[5] : false;
		document.cookie = name + "=" + escape (value) +
			((expires == null) ? "" : ("; expires=" + expires.toGMTString())) +
			((path == null) ? "" : ("; path=" + path)) +
			((domain == null) ? "" : ("; domain=" + domain)) +
			((secure == true) ? "; secure" : "");
	}
	function setAutoCompleteCookie (name, value, expire) {
		var expire_date = new Date(expire)
	    document.cookie = name + "=" + escape(value) + "; path=/; expires=" + expire_date.toGMTString()+"; domain=.kyobobook.co.kr";
	}
	
	function delAutoCompleteCookie(name) {
		var today = new Date();
	    var expire_date = new Date(today.getTime() - 60*60*24*1000);	
		document.cookie = name + "=; path=/; expires=" + expire_date.toGMTString()+"; domain=.kyobobook.co.kr";
	}
	
	/**
	 * ìë™ì™„ì„± í˜¸ì¶œ
	 * @param value í‚¤ì›Œë“œ
	 * @returns
	 */
	function sendAutoKeyword(val1,val2,currentPage){
		//data 
		$('#topPage').val(!isNaN(currentPage)?currentPage:1);
		data_val1 =  checkAutoKeywordBlank(val1);
	
	//console.log(autoSearchDomain + "/api/webAutomaticKeyword");
	//console.log("autoKeyWord:" + val1+"/ejkGb:"+val2 + "/currentPage:" + $('#topPage').val());
	//	$.cookie('test' , 'value', { path : '/' });   
		$.ajax({
			type: "GET",
			dataType : "jsonp",
			jsonp : "callback",
			url : autoSearchDomain + "/api/webAutomaticKeyword",
			xhrFields: { withCredentials: true},
		    crossDomain: true,
			data : { "autoKeyWord" : data_val1 ,	 "ejkGb" : val2,"currentPage":$('#topPage').val()},
			success: function(data) {
				getAutoKeyword(data);
			} 
		});
	}
	
	//ìë™ì™„ì„±
	function getAutoKeyword(data) {
		$("#hFrame").empty();
		var pageCnt =Math.ceil(data.totalCount/3);	//ì´ê±´ìˆ˜
		var $obj = data.result;
		var $objLink = data.link;
		var orderUrl = autoOrderDomain;
	    var url = autoSearchDomain;
	    var addHtml = "";
	    
	    if(data.result.length > 0 || data.link.length > 0) addHtml += "<div class=\"box_search_auto\">";
	    if(data.result.length > 0) {
	    	addHtml += "<div class=\"box_search_goods\">";
	    	addHtml += "	<ul class=\"list_search_goods\" >";
	    	
			$.each($obj, function(i){ //ì¼ë°˜ë¦¬ìŠ¤íŠ¸
				var item = $obj[i];
				var splitTemp =item.tot_RELATE_HTML_LIST.split("$@");
	
				//"ë°ì´í„° ì •ì˜ : 
				//0|ë°”ì½”ë“œ //1|ë¶„ì•¼ëª… //2|ìƒí’ˆëª…      //3|ì €ì     //4|ì¶œíŒì‚¬ //5|ì¶œíŒë…„ë„
				//6|ì¶œíŒì›” //7|ì •ê°€  //8|íŒë§¤ê°€      //9|í• ì¸ìœ¨    //10|ì ë¦½í¬ì¸íŠ¸
				//11|ë¬´ë£Œë°°ì†¡ì—¬ë¶€    //12|í• ì¸ì¿ í°ì—¬ë¶€ /13|ìƒí’ˆêµ¬ë¶„  //14|ì´ë¯¸ì§€URL //15|ì„±ì¸ìœ ë¬´(0,19)
				//16|â˜…          //17|ìŒë°˜/DVD ì¼ì‹œí’ˆì ˆ ì—¬ë¶€ //18|ì´ë¶ì‹œë¦¬ì¦ˆ ì—¬ë¶€ //19|ìƒ˜ ë¬´ì œí•œ ì—¬ë¶€
				
				splitTemp[0] = splitTemp[0].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[1] = splitTemp[0].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[5] = splitTemp[5].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[6] = splitTemp[6].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[7] = splitTemp[7].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[8] = splitTemp[8].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[9] = splitTemp[9].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[10] = splitTemp[10].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[11] = splitTemp[11].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[12] = splitTemp[12].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[13] = splitTemp[13].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[14] = splitTemp[14].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[15] = splitTemp[15].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[16] = splitTemp[16].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[17] = splitTemp[17].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[18] = splitTemp[18].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				splitTemp[19] = splitTemp[19].replace(/<em>/gi, "").replace(/<\/em>/gi, "");
	
				var ejbNm="";
				if(splitTemp[13] =="EBK"){
					ejbNm = "eBook";
				} else if(splitTemp[13] =="SAM"){
					ejbNm = "SAM";
				} else if(splitTemp[13] =="MUC"){
					ejbNm = "ìŒë°˜";
				} else if(splitTemp[13] =="DVD"){
					ejbNm = "DVD";
				} else if(splitTemp[13] =="GFT"){
					ejbNm = "ê¸°í”„íŠ¸";
				} else if(splitTemp[13] =="ENG" || splitTemp[13] =="JAP" || splitTemp[13] =="BNT" || splitTemp[13] =="JNT"){
					ejbNm = "ì™¸êµ­ë„ì„œ";
				} else {
					if(splitTemp[0].substring(0,2) == "14"){
						ejbNm ="POD";
					}else{
						ejbNm = "êµ­ë‚´ë„ì„œ";
					}
					
				}
				addHtml+="<li class=\"\">";
			
				addHtml+="<div class=\"cover\">";
					
				
				isHttps = "";
				if(document.location.protocol == "https:") isHttps = "s";
	
				imgUrl = splitTemp[14];
				if(imgUrl == null) imgUrl = "";
				if(imgUrl.indexOf("http") <= -1) imgUrl = "http://image.kyobobook.co.kr" + imgUrl;
				imgUrl = imgUrl.replace("http://", "http" + isHttps + "://" + isHttps);
				
				if(splitTemp[15] == "19") imgUrl="http"+  isHttps + "://" + isHttps  + "image.kyobobook.co.kr/newimages/apps/b2c/product/19adult_m.gif";
	
				removeEmTitle = splitTemp[2];
				removeEmTitle = removeEmTitle.replace(/<em>/gi, "").replace(/<\/em>/gi, "");
				removeEmTitle = removeEmTitle.trim();
				addHtml+="<a href=\"javascript:autoView('detail','"+splitTemp[13]+"','"+splitTemp[13]+"','"+splitTemp[0]+"', '', 'LEa');\" class=\"auto_search\"><img src=\""+imgUrl+"\" alt=\""+removeEmTitle+"\" onError=\"this.src='http" + isHttps + "://" + isHttps + "image.kyobobook.co.kr/newimages/apps/b2c/product/Noimage_l.gif';\" >";
				addHtml+="</a></div>";
				addHtml+="<div class=\"title\"><a href=\"javascript:autoView('detail','"+splitTemp[13]+"','"+splitTemp[13]+"','"+splitTemp[0]+"', '', 'LEa');\" data-value=\"" + removeEmTitle + "\" class=\"auto_search\">["+ejbNm+"] <strong>"+splitTemp[2]+"</strong></a></div>";
				addHtml+="<div class=\"author\" style=\"overflow: hidden; white-space: nowrap; -ms-text-overflow: ellipsis;\">";
				var isLine= 0;
				if(splitTemp[3] != "") {
					addHtml += splitTemp[3];
					if(!(splitTemp[13]=="MUC" || splitTemp[13]=="DVD" || splitTemp[13]=="GFT" || splitTemp[13]=="DUM")){
						addHtml += " ì§€ìŒ";
					} 
					isLine = 1;
				}
				if(splitTemp[4].trim() != "") {
					if(isLine == '1') addHtml += " | ";
					addHtml += splitTemp[4];
					isLine = 1; 
				}
				if(splitTemp[13] != "GFT") {
					if(isLine == '1') addHtml+=" | ";
					addHtml += splitTemp[5]+"ë…„ "+splitTemp[6]+"ì›”";
				}
				addHtml += "</div>";
				addHtml+="<div class=\"price\">";
				//ê°€ê²© í‘œì‹œ ë° ì¥ë°”êµ¬ë‹ˆ í‘œì‹œ
				if (splitTemp[13] =="SAM"){  //  SAMì¼ë•Œ
					if(splitTemp[19]=="4")
						addHtml+="<strong class=\"text\">samë¬´ì œí•œ ì²«ë‹¬ë¬´ë£Œ</strong>samì´ìš©ê¶Œ êµ¬ë§¤ì‹œ ì—´ëŒê°€ëŠ¥";
					addHtml+="<strong class=\"text\">sam ì›” 3,300ì›~</strong>SAM ì´ìš©ê¶Œêµ¬ë§¤ì‹œ ì—´ëŒê°€ëŠ¥";
				} else if((splitTemp[13]=="MUC" || splitTemp[13]=="DVD") && splitTemp[17]=="1"){//ê°€ê²© í‘œì‹œ ë° ì¥ë°”êµ¬ë‹ˆ í‘œì‹œ ( ìŒì•… ìŒë°˜ ì¼ë•Œ )
					addHtml+="<strong class=\"text\">ì¼ì‹œí’ˆì ˆ</strong>";
				} else if(splitTemp[13]=="EBK" && splitTemp[12] == "1") { //coupon_yn ì´ë¶ì—°ì¬ì—¬ë¶€
					addHtml += 	"<strong class=\"text\">-ì—°ì¬- </strong><strong>ëŒ€ì—¬/êµ¬ë§¤ ê°€ëŠ¥</strong>";
				} else if(splitTemp[13]=="EBK" && splitTemp[11] == "1") { //free_send_yn ì´ë¶ë¬´ë£Œë„ì„œ
					addHtml +="<strong>ë¬´ë£Œë„ì„œ</strong>";
				} else { //ê°€ê²© í‘œì‹œ ë° ì¥ë°”êµ¬ë‹ˆ í‘œì‹œ ( ê·¸ì™¸ )
					if(splitTemp[7] != null && splitTemp[8] != null && splitTemp[9] != null && splitTemp[10] != null) {   
						addHtml+= (parseInt(splitTemp[7])+"").replace(/\B(?=(\d{3})+(?!\d))/g, ",")+"ì› â†’ <strong>"+(parseInt(splitTemp[8])+"").replace(/\B(?=(\d{3})+(?!\d))/g, ",")+"ì›</strong>" ;
						addHtml+=" ["+parseInt(splitTemp[9])+"%"+(splitTemp[9]  > -1 ? splitTemp[9]  <100 ?"â†“":"â†‘" :"â†‘")+"+"+(parseInt(splitTemp[10])+"").replace(/\B(?=(\d{3})+(?!\d))/g, ",")+"ì› <b>P</b>] ";
					}
					if (splitTemp[0].substring(0,3) != "483"  && splitTemp[0].substring(0,2) != "14" && splitTemp[18]  != "1"){////ê°€ê²© í‘œì‹œ ë° ì¥ë°”êµ¬ë‹ˆ í‘œì‹œ (podê°€ ì•„ë‹ë•Œ) 
						addHtml+="<a href=\"javascript:goAutoAddCartChk('"+orderUrl+"','"+splitTemp[0]+"', '"+splitTemp[13]+"', '"+splitTemp[15]+"', '"+data.loginYn+"');\" class=\"auto_search_cart button\">ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</a>";
					}else{
							//podë©´ ì¥ë°”êµ¬ë‹ˆ í•„ìš” ì—†ìŒ
					}
				}
				addHtml+="</div>";
				addHtml+="</li>";
			});
			addHtml+="</ul>"; 
		    
			//////////page//////
			addHtml+="<div class=\"status\">ê´€ë ¨ìƒí’ˆ (<strong>"+data.totalCount+"</strong>ê°œ)";
			addHtml+="<span class=\"nav_page\"><a href=\"#\" class=\"auto_search_prev btn_prev\">ì´ì „</a> ";
			addHtml+="<span class=\"page\"><strong>"+$('#topPage').val()+"</strong> /<span> "+pageCnt+"</span></span>";
			addHtml+=" <a href=\"#\" class=\"auto_search_prev btn_next\">ë‹¤ìŒ</a></span>";
			addHtml+= "</div></div>";
	    }
	    
	    if(data.link.length > 0) {
		    //////Link//
			addHtml+="<ul class=\"list_search_category\">";
			$.each($objLink, function(i){//ë§í¬ ë¦¬ìŠ¤íŠ¸
				var item = $objLink[i];
				//console.log("link="+item.link_CLASS_WEB_URL);
				addHtml+="<li class=\"auto_search_category\"><a href=\""+item.link_CLASS_WEB_URL+"\" class=\"auto_search_category\">"+item.link_CLASS_FNM+"</a></li>";
			});
			addHtml+="</ul>";
	    }
		
	    if(data.result.length > 0 || data.link.length > 0) {
	    	addHtml += "<div class=\"box_search_bottom\">";
	    	addHtml += "	<a href=\"javascript:void(0);\" id=\"lately_help\">ë„ì›€ë§</a>";
	    	addHtml += "	<div class=\"button\"><a href=\"#\" id=\"close_search_goods\">ë‹«ê¸°</a></div>";
	    	addHtml += "</div></div>";
	    }
		$("#hFrame").append(addHtml);
		if(addHtml == "") $("#hFrame").hide(); 
	}
	
	//ìµœê·¼ê²€ìƒ‰ì–´
	function getRcntKeywordList(recentSch) {
		$("#hFrame").empty();
		recentWrdList = recentSch.split("$|");
		totalKeywordCount = recentWrdList.length-1 ;
		var addHtml = "";
		addHtml += "<div class=\"box_search_auto\">";
		addHtml += "	<ul class=\"list_search_recent\">";
		for(var i = 0 ; i < recentWrdList.length-1 ; i++){
			recentWrd = recentWrdList[i].split("$^|");
			addHtml += "	<li class=\"\"><a href=\"#\" class=\"keyword lately_search\">" + recentWrd[0] + "</a>  <span class=\"date\">" + recentWrd[1] + "</span> <a href=\"javascript:void(0);\" data-value=\"" + i + "\" id=\"btnLatelyRemove\" class=\"btn_delete\">ì‚­ì œ</a></li>";
		}
		addHtml += "	</ul>";
		addHtml += "	<div class=\"box_search_bottom\">";
		addHtml += "		<a href=\"#\" id=\"lately_help\">ë„ì›€ë§</a>";
		addHtml += "		<div class=\"button\"><a href=\"javascript:void(0);\" id=\"btnLatelyRemoveAll\">ìµœê·¼ê²€ìƒ‰ì–´ ì‚­ì œ</a> | <a href=\"javascript:void(0);\" id=\"btnLatelyShowOff\">ê²€ìƒ‰ì–´ì €ì¥ ë„ê¸°</a></div>";
		addHtml += "	</div>";
		addHtml += "</div>";
		$("#hFrame").append(addHtml);
	}
	
	//ìµœê·¼ê²€ìƒ‰ì–´ ì—†ìŒ
	function getRcntKeywordNoList() {
		$("#hFrame").empty();
		var addHtml = "";
		addHtml += "<div class=\"box_search_auto\">";
		addHtml += "	<div class=\"box_search_text\">ìµœê·¼ ê²€ìƒ‰ì–´ê°€ ì—†ìŠµë‹ˆë‹¤.</div>";
		addHtml += "	<div class=\"box_search_bottom\">";
		addHtml += "		<a href=\"#\" id=\"lately_help\">ë„ì›€ë§</a>";
		addHtml += "		<div class=\"button\"><a href=\"javascript:void(0);\" id=\"btnLatelyShowOff\">ê²€ìƒ‰ì–´ì €ì¥ ë„ê¸°</a></div>";
		addHtml += "	</div>";
		addHtml += "</div>";
		$("#hFrame").append(addHtml);
	}
	
	//ê²€ìƒ‰ì–´ì €ì¥ êº¼ì§
	function getRcntKeywordNoShow() {
		$("#hFrame").empty();
		var addHtml = "";
		addHtml += "<div class=\"box_search_auto\">";
		addHtml += "	<div class=\"box_search_text\">ê²€ìƒ‰ì–´ì €ì¥ì´ êº¼ì ¸ ìˆìŠµë‹ˆë‹¤.<br> ê²€ìƒ‰ì–´ì €ì¥ ì¼œê¸°ë¥¼ í´ë¦­í•´ ì£¼ì„¸ìš”.</div>";
		addHtml += "	<div class=\"box_search_bottom\">";
		addHtml += "		<a href=\"#\" id=\"lately_help\">ë„ì›€ë§</a>";
		addHtml += "		<div class=\"button\"><a href=\"javascript:void(0);\" id=\"btnLatelyShowOn\">ê²€ìƒ‰ì–´ì €ì¥ ì¼œê¸°</a></div>";
		addHtml += "	</div>";
		addHtml += "</div>";
		$("#hFrame").append(addHtml);
	}
	
	
	function rcntKeywordShow() {
		if(isRcntShow == false) {
			getRcntKeywordNoShow();
		} else {
			var recentSch =  GetAutoCompleteCookie("recentSch");
			if(recentSch != null && recentSch != "") {
				getRcntKeywordList(recentSch);
			} else {
				getRcntKeywordNoList();
			}
		}
	}
	
	
	//ìµœê·¼ê²€ìƒ‰ì–´ ë„ê¸°
	function setShowOff() {
		isRcntShow = false;
		
		var today = new Date();
	    var expire_date = new Date(today.getTime() + 365*60*60*24*1000);
		SetAutoCompleteCookie ("rcntShow", "off", expire_date);
		$("#hFrame").hide();
	}
	
	//ìµœê·¼ê²€ìƒ‰ì–´ ì¼œê¸°
	function setShowOn() {
		isRcntShow = true;
		var today = new Date();
	    var expire_date = new Date(today.getTime() - 60*60*24*1000);
		SetAutoCompleteCookie ("rcntShow", "on", expire_date);
		$("#hFrame").hide();
		
	}
	
	//ìµœê·¼ê²€ìƒ‰ì–´ ì „ì²´ ì‚­ì œ
	function removeKeywordAll() {
		delAutoCompleteCookie("recentSch");
		$("#hFrame").empty();
		$("#hFrame").hide();
	}
	
	
	//ìµœê·¼ê²€ìƒ‰ì–´ ì‚­ì œ
	function delSchList(idx) {
		var recentSch =  GetAutoCompleteCookie("recentSch");
	    if( recentSch != null && recentSch != ""){
	        var recentSchArray = recentSch.split("$|");
	        var str = "";
	        for( var i=0; i<recentSchArray.length - 1; i++ ){
	            if( i != idx ){
	                str += recentSchArray[i] + "$|";
	            }
	        }
	        var today = new Date();
	        var expire_date = new Date(today.getTime() + 365*60*60*24*1000);
	        setAutoCompleteCookie("recentSch", str, expire_date);
	    }	
		$("#hFrame").empty();
		rcntKeywordShow();   
	}
	
	
	
	//ìµœê·¼ê²€ìƒ‰ì–´ ì¶”ê°€
	function addRcentSchList(sKeyword) {
		if(isRcntShow) {
			var maxLength = 11; //ìµœëŒ€ ì €ì¥ê°¯ìˆ˜
			var delimiter = "$|"; //String êµ¬ë¶„ì
			var delimiter2 = "$^|"; //String êµ¬ë¶„ì			
			var date = new Date();	
			var mm = (date.getMonth() + 1);
		   	var dd = date.getDate();
		   	
		   	if (("" + mm).length == 1) { mm = "0" + mm; }
		    if (("" + dd).length   == 1) { dd   = "0" + dd;   }
		   	
			var dateForm = mm +"."+ dd;
	
			var recentSch = GetAutoCompleteCookie("recentSch");
			var recentWord = "";
			sKeyword	= suggest_cutString(sKeyword,52);		
			recentWord = sKeyword + delimiter2 + dateForm;
			if(recentSch == null){
				recentSch = delimiter;				
			}else{
				recentSch =  delimiter + recentSch;
			}
	
		    //ê³¼ê±°ë‚ ì§œ ì¤‘ë³µ ì²´í¬
			if(recentSch.indexOf(recentWord+delimiter) <= 0 && recentSch.indexOf(sKeyword + delimiter2) > 0){	//í˜„ì¬ë‚ ì§œ ì¤‘ë³µì²´í¬
				tot = parseInt(recentSch.indexOf(sKeyword + delimiter2))+ parseInt(delimiter2.length) + parseInt(sKeyword.length) + parseInt(dateForm.length)+parseInt(delimiter.length);
				dup_data = recentSch.substring(recentSch.indexOf(sKeyword + delimiter2), tot);
				//console.log("dup_data:" + dup_data);			
				recentSch = recentSch.replace(dup_data,"");
		    }
			
			if(recentSch.indexOf(recentWord+delimiter) > 0){	//í˜„ì¬ë‚ ì§œ ì¤‘ë³µì²´í¬
				recentSch = recentSch.replace(delimiter+recentWord+delimiter,delimiter);	      
			}	
			recentSch = recentWord + recentSch;	
	
			var recentSchCount = recentSch.split(delimiter).length;
			
			//ìµœëŒ€ ì €ì¥ê°¯ìˆ˜ë¥¼ ì´ˆê³¼í•˜ë©´ ì²˜ìŒë“¤ì–´ì˜¨ê±° ì‚­ì œ. 
		    if(recentSchCount>maxLength){
		       recentSch = recentSch.substring(0,recentSch.lastIndexOf(delimiter));
		       recentSch = recentSch.substring(0,recentSch.lastIndexOf(delimiter)+delimiter.length);
		    }
		    
			var today = new Date();
			var expire_date = new Date(today.getTime() + 365*60*60*24*1000);
	//console.log("recentSch:" + recentSch + ":" + expire_date);		
			setAutoCompleteCookie("recentSch" ,recentSch, expire_date);			
		}
	}
	
	//limitByte ì˜ byte ë§Œí¼ str ì„ ìë¥¸ í›„ ë°˜í™˜í•œë‹¤.                                                                  
	function suggest_cutString( str , limitByte)
	{
	    var inc = 0;
	    var nbytes = 0;
	    var msg = "";
	    var msglen = str.length;
	
	    for (i=0; i<msglen; i++) {
	      
	        var ch = str.charAt(i);
	        if (escape(ch).length > 4) {
	            inc = 2;
	        } else if (ch == '') {
	            if (str.charAt(i-1) != '') {
	                inc = 1;
	            }
	        } else if (ch == '<' || ch == '>') {
	            inc = 4;
	        } else {
	            inc = 1;
	        }
	        if ((nbytes + inc) > limitByte ) {
	            break;
	        }
	        nbytes += inc;
	        msg += ch;
	        
	    }
	    
	    if( i != msglen ) msg = msg + "..";
	    
	    return msg;
	}
	
	/**
	 * ê²€ìƒ‰ì–´ ì²´í¬
	 * @param text
	 * @returns
	 */
	function checkAutoKeyword(text){
		var checkValue = text+"";
		checkValue = checkValue.replace(/&/gi, "&amp;");
		checkValue = checkValue.replace(/\\/gi, "&#92;");
		checkValue = checkValue.replace(/</gi, "&lt;");
		checkValue = checkValue.replace(/>/gi, "&gt;");
		checkValue = checkValue.replace(/'/gi, "&#39;");
		checkValue = checkValue.replace(/\[/gi, "&#91;");
		checkValue = checkValue.replace(/\]/gi, "&#93;");
		checkValue = checkValue.replace(/"/gi, "&#34;");
		return checkValue;
	}
	
	function checkAutoKeywordBlank(text){
		var checkValue = text+"";
		checkValue = checkValue.replace("&amp;", "&");
		checkValue = checkValue.replace("&#92;", "\\");
		checkValue = checkValue.replace("&lt;", "<");
		checkValue = checkValue.replace("&gt;", ">");
		checkValue = checkValue.replace("&#39;", "'");
		checkValue = checkValue.replace("&#91;", "[");
		checkValue = checkValue.replace("&#93;", "]");
		checkValue = checkValue.replace("&#34;", "\"");
		return checkValue;
	}
	
	/**
	 * ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ë¬¸ì URLì¸ì½”ë”© ì„¤ì •
	 * @param inum
	 * @returns
	 */
	function replaceKeyword(inum) {
		inum = inum.replace(/\+/g, "%2B"); 
		return inum; 
	}
	
	/**
	 * ê²€ìƒ‰ ì‹œì‘ ë° í˜ì´ì§€ ì´ë™
	 * @param value
	 * @param save
	 * @returns
	 */
	function goSearchKeywordPage(keyvalue, orderClick){
		inkeyword = keyvalue;
		if(inkeyword == ""){
			alert("ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");
			return;
		}
	
		var $form = $('<form></form>'); 
	    $form.attr('action', autoSearchDomain + '/web/search');
	    $form.attr('method', 'get');
	    $form.appendTo('body'); 
	    
	    var keyword = $('<input type="hidden" value="'+encodeURIComponent(replaceKeyword(inkeyword))+'" name="vPstrKeyWord">');
	    $form.append(keyword);
	    if(orderClick != null){
	    	var click = $('<input type="hidden" value="'+orderClick+'" name="orderClick">');
	    	$form.append(click);
	    }
	    topEjkGb = $("#topEjkGb").val().trim();
	    if(topEjkGb != "TOT") {
	    	var ejkGb = "";
	    	var collNm = "";
	    	if(topEjkGb == "SAM") {	//sam
	    		ejkGb = $('<input type="hidden" value="SAM@DIGITAL" name="searchCategory">');
	    		collNm = $('<input type="hidden" value="DIGITAL" name="collName">');
	    	} else if(topEjkGb == "EBK") {	//ebook
	    		ejkGb = $('<input type="hidden" value="EBOOK@DIGITAL" name="searchCategory">');
	    		collNm = $('<input type="hidden" value="DIGITAL" name="collName">');
	    	} else if(topEjkGb == "KOR") {	//êµ­ë‚´ë„ì„œ
	    		ejkGb = $('<input type="hidden" value="êµ­ë‚´ë„ì„œ@KORBOOK" name="searchCategory">');
	    		collNm = $('<input type="hidden" value="KORBOOK" name="collName">');
	    	} else if(topEjkGb == "ENG")  {	//ì™¸êµ­ë„ì„œ
	    		ejkGb = $('<input type="hidden" value="ì™¸êµ­ë„ì„œ@FOREIGN" name="searchCategory">');
	    		collNm = $('<input type="hidden" value="FOREIGN" name="collName">');
	    	} else if(topEjkGb == "MUC" || topEjkGb == "DVD") {	//ìŒë°˜/ì˜ìƒ
	    		ejkGb = $('<input type="hidden" value="ìŒë°˜/ì˜ìƒ@HOTTRACKS" name="searchCategory">');
	    		collNm = $('<input type="hidden" value="HOTTRACKS" name="collName">');
	    	} else if(topEjkGb == "GFT") { //ê¸°í”„íŠ¸
	    		ejkGb = $('<input type="hidden" value="ê¸°í”„íŠ¸@GIFT" name="searchCategory">');
	    		collNm = $('<input type="hidden" value="GIFT" name="collName">');
	    	} else if(topEjkGb == "DIG") { //ebook
	    		ejkGb = $('<input type="hidden" value="EBOOK@DIGITAL" name="searchCategory">');
	    		collNm = $('<input type="hidden" value="DIGITAL" name="collName">');
	    	} else if(topEjkGb == "USE") {
	    		collNm = $('<input type="hidden" value="USED" name="collName">');
	    	}
	    	if(ejkGb != "") $form.append(ejkGb);
	    	if(collNm != "") $form.append(collNm);
	    	var searchPcondition = $('<input type="hidden" value="1" name="searchPcondition">');
	    	$form.append(searchPcondition);
	    }
	    topSbCdtnCode = $("#topSbCdtnCode").val().trim();
	    if(topSbCdtnCode != "") {
	    	var sbCdtnCode = $('<input type="hidden" value="'+ $("#topSbCdtnCode").val().trim() +'" name="searchSbCdtnCode">');
	    	$form.append(sbCdtnCode);
	    }
	    $form.submit();	
	}
	
	
	function submitSearchKeywordPage() {
		var eventurlFlag = $("#eventurlFlag").val();
		var eventurlDelFlag = $("#eventurlDelFlag").val();
		var styleEvent = $("#searchKeyword").css("background-image");
		var isEvent = "N";
		if(styleEvent != "" && styleEvent != "none") isEvent = "Y";
		var keyword = $("#searchKeyword").val();
		var ejkGb = $("#topEjkGb").val(); 
		var eventurl = $("#eventurl").val(); 
		
		if(eventurlFlag == "1" && eventurlDelFlag == "0" && isEvent == "Y"){
			document.location.href = $("#eventurl").val();
		} else if(ejkGb != "TOT" && keyword == "" && eventurl != ""){
			document.location.href = $("#eventurl").val();
		} else {
			if(keyword.trim() == "") {
				alert("ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");
				return;
			}
			keyword = checkAutoKeyword(keyword.trim());
			addRcentSchList(keyword);
			
			topEjkGb = $("#topEjkGb").val().trim();
			orderClick = sOrderClick;		//"LAG";
		    if(topEjkGb == "SAM") orderClick = "LEK";
		    else if(topEjkGb == "EBK") orderClick = "LEH";
		    
			goSearchKeywordPage(keyword, orderClick);
		}
	}


	$(document).ready(function() {
		isRcntShow = GetAutoCompleteCookie("rcntShow")=="off" ? false : true;

		
		//ë©”ì¸ ìƒë‹¨í™”ë©´ì— ë‹ë³´ê¸° í´ë¦­ì‹œ ì´ë²¤íŠ¸
		$(".searcharea .btn_search, .searh_word .btn_search01").click(function(){
			submitSearchKeywordPage();
		});
		
		//í‚¤ì›Œë“œ ì—”í„°í‚¤ë¡œ ê²€ìƒ‰ ì„¤ì •
		$("#searchKeyword").keyup(function (key) {
			var ejkGb = $("#topEjkGb").val(); 
	        if(key.keyCode == 13){//í‚¤ê°€ 13ì´ë©´ ì‹¤í–‰ (ì—”í„°ëŠ” 13)
				if(!(ejkGb == "EBK" || ejkGb == "SAM")){
					submitSearchKeywordPage();
				}
	        } else if(key.keyCode == 38) { //ìœ„ í™”ì‚´í‘œ
	        	if($("#hFrame").find("ul").hasClass("list_search_recent")) {
	    			$this = $(".list_search_recent").children("li.on");
	    			isAutoVal = 0;
	    		} else if($("#hFrame").find("ul").hasClass("list_search_goods")) {
	    			$this = $(".list_search_goods").children("li.on");
	    			isAutoVal = 1;
	    		}
	        	if( $this.prev().size() ) {
					$this.parent().children("li").removeClass('on');
					$this.prev().addClass('on');
					if(isAutoVal == 1) {
						$("#searchKeyword").val($this.prev().children('.title').find("a").data("value"));
					} else {
						$("#searchKeyword").val($this.prev().children('a.keyword').text());
					}
					sOrderClick = "LEA";
				} else {
					$("#hFrame").hide();
					$("#searchKeyword").val($("#from_keyword").val());
				}       	
			} else if(key.keyCode == 40) { //ì•„ë˜ í™”ì‚´í‘œ
				if($("#hFrame").find("ul").hasClass("list_search_recent")) {
	    			$this = $(".list_search_recent").children("li.on");
	    			isAutoVal = 0;
	    		} else if($("#hFrame").find("ul").hasClass("list_search_goods")) {
	    			$this = $(".list_search_goods").children("li.on");
	    			isAutoVal = 1;
	    		}
				if( $this.next().size() ) {
					$this.parent().children("li").removeClass('on');
					$this.next().addClass('on');
					if(isAutoVal == 1) {
						$("#searchKeyword").val($this.next().children('.title').find("a").data("value"));
					} else {
						$("#searchKeyword").val($this.next().children('a.keyword').text());
					}
				} else {
					$this.parent().children("li").removeClass('on');
					if(isAutoVal == 1) {
			    		$("#searchKeyword").val($(".list_search_goods li:eq(0)").children(".title").find("a").data("value"));
			    		$(".list_search_goods li:eq(0)").addClass('on');
					} else {
			    		$("#searchKeyword").val($(".list_search_recent li:eq(0) a.keyword").text());
			    		$(".list_search_recent li:eq(0)").addClass('on');
					}
				}
				sOrderClick = "LEA";
				if($("#hFrame").css("display") == "none") $("#hFrame").show();
			} else {
				if($("#searchKeyword").css("background-image") != "" && $("#searchKeyword").css("background-image") != "none") $("#searchKeyword").css("background-image", "");
				sOrderClick = "LAG";
	        	var keyword = checkAutoKeyword($("#searchKeyword").val());
	    		if(keyword != "") sendAutoKeyword(keyword,$("#topEjkGb").val(),1); 
	    		else rcntKeywordShow();
	    		$("#hFrame").show();
	        }
	        
	    });
		
		$("#searchKeyword").click(function() {
			if($("#hFrame").css("display") == "none") {
				var keyword = checkAutoKeyword($("#searchKeyword").val());
				if(keyword != "") sendAutoKeyword(keyword,$("#topEjkGb").val(),parseInt($('#topPage').val())); 
				else rcntKeywordShow();
				$("#hFrame").show();
			}
		});
	
		$(document).bind("click", function(e) {
			/*
			console.log("e.target.id:" + e.target.id);
			console.log("e.target.class:" + $(e.target).attr('class'));
			console.log("e.target.parent().find(ul) class:" + $(e.target).parent().find("ul").attr('class'));
			console.log("e.target.parent().find(div) class:" + $(e.target).parent().find("div").attr('class'));
			console.log("e.target.parent().parent().find(ul) class:" + $(e.target).parent().parent().find("ul").attr('class'));
			console.log("e.target.parent().parent().find(div) class:" + $(e.target).parent().parent().find("div").attr('class'));
			console.log("e.target.parent().parent().parent().find(ul) class:" + $(e.target).parent().parent().parent().find("ul").attr('class'));
			console.log("e.target.parent().parent().parent().find(div) class:" + $(e.target).parent().parent().parent().find("div").attr('class'));
			console.log("----------------------------------------------------");
			*/
			
			if(e.target.id == "searchKeyword"
			   || e.target.id == "close_search_goods" || $(e.target).attr("class") == "box_search_bottom"
			   || e.target.id == "lately_help" || e.target.id == "btnLatelyRemove" || e.target.id == "btnLatelyRemoveAll" || e.target.id == "btnLatelyShowOff" || e.target.id == "btnLatelyShowOn" || $(e.target).attr("class") == "keyword lately_search"
			   || $(e.target).attr("class") == "auto_search" || $(e.target).attr("class") == "auto_search_cart button" || $(e.target).attr("class") == "auto_search_prev btn_prev" || $(e.target).attr("class") == "auto_search_next btn_next"
			   || $(e.target).attr("class") == "auto_search_category"
			   || $(e.target).parent().find("ul").attr("class") == "list_search_recent"	   
			   || $(e.target).parent().find("ul").attr("class") == "list_search_goods"	
			   || $(e.target).parent().parent().find("ul").attr("class") == "list_search_goods"	
			   || $(e.target).parent().parent().parent().find("ul").attr("class") == "list_search_goods"	
			   || $(e.target).parent().find("div").attr("class") == "auto_complete"	 
			   || $(e.target).parent().find("div").attr("class") == "box_search_goods"
			   || $(e.target).parent().find("div").attr("class") == "box_search_bottom"
			   || $(e.target).parent().parent().find("div").attr("class") == "box_search_auto"
				   
			) {
				//ìë™ì™„ì„±/ìµœì‹ ê²€ìƒ‰ì–´ ê²€ìƒ‰ì–´ ì°½ í™œì„±í™” 
			} else {
				if($("#hFrame").css("display") != "none") {
					$("#hFrame").hide();
				}
			}
		});
		
		
		//ê²€ìƒ‰ì–´ ë„ì›€ë§
		$(document).delegate("#lately_help", "click", function() {
			$(this).attr("href", autoWwwDomain + "/cscenter/faqIndex.laf?question=%C3%D6%B1%D9%B0%CB%BB%F6%BE%EE");
			window.location.href = $(this).attr("href"); 
		});
	
		//ë‹«ê¸°
		$(document).delegate("#close_search_goods", "click", function() {
			if($("#hFrame").css("display") != "none") {
				$("#hFrame").hide();
			}
		});
		
		
		//ìµœê·¼ê²€ìƒ‰ì–´ ì „ì²´ ì‚­ì œ
		$(document).delegate("#btnLatelyRemoveAll", "click", function(){
			removeKeywordAll();
	    });
		
		//ìµœê·¼ê²€ìƒ‰ì–´ ì‚­ì œ
		$(document).delegate("#btnLatelyRemove", "click", function(){
			idx = $(this).data("value");
			delSchList(idx);
	    });
		
		//ê²€ìƒ‰ì–´ì €ì¥ ì¼œê¸°
		$(document).delegate("#btnLatelyShowOn", "click", function(){
			setShowOn();
	    });
		
		//ê²€ìƒ‰ì–´ì €ì¥ ë„ê¸°
		$(document).delegate("#btnLatelyShowOff", "click", function(){
			setShowOff();
	    });	
	
		//ìµœê·¼ê²€ìƒ‰ì–´ ê²€ìƒ‰ì–´ ë§í¬
		$(document).delegate(".lately_search", "click", function() {
			url = autoSearchDomain + "/web/search?vPstrKeyWord=" + encodeURIComponent($(this).text());
	
			topEjkGb = $("#topEjkGb").val().trim();
			if(topEjkGb != "TOT") {
				url += "&searchPcondition=1";
				if(topEjkGb == "SAM") 	url += "&searchCategory="+ encodeURIComponent("SAM@DIGITAL") + "&collName=" + encodeURIComponent("DIGITAL");
				else if(topEjkGb == "EBK") 	url += "&searchCategory=" + encodeURIComponent("EBOOK@DIGITAL") + "&collName=" + encodeURIComponent("DIGITAL");
				else if(topEjkGb == "KOR") url += "&searchCategory="+encodeURIComponent("êµ­ë‚´ë„ì„œ@KORBOOK") + "&collName=" + encodeURIComponent("KORBOOK");
		    	else if(topEjkGb == "ENG") url += "&searchCategory=" + encodeURIComponent("ì™¸êµ­ë„ì„œ@FOREIGN")+ "&collName=" + encodeURIComponent("FOREIGN");
		    	else if(topEjkGb == "MUC" || topEjkGb == "DVD") url += "&searchCategory=" + encodeURIComponent("ìŒë°˜/ì˜ìƒ@HOTTRACKS") + "&collName=" + encodeURIComponent("HOTTRACKS");
		    	else if(topEjkGb == "GFT") url += "&searchCategory=" + encodeURIComponent("ê¸°í”„íŠ¸@GIFT") + "&collName=" + encodeURIComponent("GIFT");
		    	else if(topEjkGb == "DIG") url += "&searchCategory=" + encodeURIComponent("EBOOK@DIGITAL") + "&collName=" + encodeURIComponent("DIGITAL");
				else if(topEjkGb == "USE") url += "&collName=USED";
		    }
		    topSbCdtnCode = $("#topSbCdtnCode").val().trim();
		    if(topSbCdtnCode != "") {
		    	url += "&searchSbCdtnCode=" + $("#topSbCdtnCode").val().trim();
		    }
	
			orderClick = "LET";
		    if(topEjkGb == "SAM") orderClick = "LEK";
		    else if(topEjkGb == "EBK") orderClick = "LEH";		
		    url += "&orderClick=" + orderClick;
		    
			$(this).attr("href", url);
			window.location.href = $(this).attr("href"); 
		});
		
		//ìë™ì™„ì„±, ìµœê·¼ê²€ìƒ‰ì–´ ë‚´  hover
		$(document).delegate(".list_search_goods li, .list_search_category li, .list_search_recent li", 'mouseover', function() {
			$(this).addClass('on');
		});
		$(document).delegate(".list_search_goods li, .list_search_category li, .list_search_recent li", 'mouseout', function(){
			$(this).removeClass('on');
		});
		
		
		
		$(document).delegate(".box_search_goods .btn_prev", "click", function(){
			if(1 < parseInt($('#topPage').val())){
			  	var keyword = checkAutoKeyword($("#searchKeyword").val());
				sendAutoKeyword(keyword,$("#topEjkGb").val(),parseInt($('#topPage').val())-1); 
			}
		});	
		
		$(document).delegate(".box_search_goods .btn_next", "click", function(){
			if(0< parseInt($('#topPage').val()) && parseInt($('#topPage').val()) < parseInt($('.box_search_goods').find('.status .page span').text()) ){
			  	var keyword = checkAutoKeyword($("#searchKeyword").val());
				sendAutoKeyword(keyword,$("#topEjkGb").val(),parseInt($('#topPage').val())+1); 
			}
		});	
	});
}) (jQuery);
TÑ¬W,      ^‡FA^‡FDA…¨ª^‡—K   ;    :https://search.kyobobook.co.kr/js_web/kyobo_search_auto.js necko:classified 1 strongly-framed 1 security-info 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 request-method GET response-head HTTP/1.1 200 OK
Cache-Control: private
ETag: "FVW8yjPNY+f"
Last-Modified: Wed, 01 Apr 2020 04:43:00 GMT
Content-Type: application/javascript; charset=UTF-8
Content-Length: 40654
Date: Fri, 03 Apr 2020 14:20:51 GMT
 original-response-headers Server: 
Cache-Control: private
ETag: "FVW8yjPNY+f"
Last-Modified: Wed, 01 Apr 2020 04:43:00 GMT
Content-Type: application/javascript; charset=UTF-8
Content-Length: 40654
Date: Fri, 03 Apr 2020 14:20:51 GMT
 ctid 2 uncompressed-len 0 net-response-time-onstart 4109 net-response-time-onstop 4114   Î